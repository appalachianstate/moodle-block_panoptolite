define(["jquery","core/tree","core/ajax"],function(a,b,c){return{init:function(c){var d=this,e=a("#bid_"+c+"_list");"false"==e.attr("data-loaded")?d.load(c):(new b(".block_panoptolite .block_tree"),a(".block_panoptolite .block_tree.list a").on("click",function(b){b.preventDefault(),b.stopPropagation(),a("#bid_"+c+"_form").attr("action",b.currentTarget.href).submit()})),a("#inst"+c+" .footer a").on("click",function(a){a.preventDefault(),a.stopPropagation(),d.load(c,!0)})},load:function(d){var e=a("#bid_"+d+"_list");if(null!==e){e.addClass("loading");var f=c.call([{methodname:"block_panoptolite_get_content_text",args:{bid:d}}]).shift();f.done(function(c){e.html(c),new b(".block_panoptolite .block_tree"),a(".block_panoptolite .block_tree.list a").on("click",function(b){b.preventDefault(),b.stopPropagation(),a("#bid_"+d+"_form").attr("action",b.currentTarget.href).submit()}),e.removeClass("loading")})}}}});